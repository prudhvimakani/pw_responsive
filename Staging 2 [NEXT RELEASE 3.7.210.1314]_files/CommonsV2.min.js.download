/* (c) 2012 Propertyware.com */
function JSONscriptRequest(fullUrl,callback){this.fullUrl=fullUrl;this.noCacheIE='&noCacheIE='+(new Date()).getTime();this.headLoc=document.getElementsByTagName("head").item(0);this.scriptId='JscriptId'+JSONscriptRequest.scriptCounter++;}
JSONscriptRequest.scriptCounter=1;JSONscriptRequest.prototype.buildScriptTag=function(){this.scriptObj=document.createElement("script");this.scriptObj.setAttribute("type","text/javascript");this.scriptObj.setAttribute("charset","utf-8");this.scriptObj.setAttribute("src",this.fullUrl+this.noCacheIE);this.scriptObj.setAttribute("id",this.scriptId);};JSONscriptRequest.prototype.removeScriptTag=function(){this.headLoc.removeChild(this.scriptObj);};JSONscriptRequest.prototype.addScriptTag=function(){this.headLoc.appendChild(this.scriptObj);};function ScriptImporter(fullUrl){this.fullUrl=fullUrl.indexOf('?')<0?fullUrl+'?':fullUrl;this.noCacheIE='&noCacheIE='+(new Date()).getTime();this.headElement=document.getElementsByTagName("head").item(0);this.scriptId='JscriptId'+ScriptImporter.scriptCounter++;return this;};ScriptImporter.scriptCounter=1;ScriptImporter.prototype.buildScriptTag=function(){this.scriptObj=document.createElement("script");this.scriptObj.setAttribute("type","text/javascript");this.scriptObj.setAttribute("charset","utf-8");this.scriptObj.setAttribute("src",this.fullUrl+this.noCacheIE);this.scriptObj.setAttribute("id",this.scriptId);};ScriptImporter.prototype.removeScriptTag=function(){this.headElement.removeChild(this.scriptObj);};ScriptImporter.prototype.addScriptTag=function(){this.headElement.appendChild(this.scriptObj);};ScriptImporter.prototype.importScript=function(){this.buildScriptTag();this.addScriptTag();return this;};function CSSImporter(fullUrl){this.fullUrl=fullUrl.indexOf('?')<0?fullUrl+'?':fullUrl;this.noCacheIE='&noCacheIE='+(new Date()).getTime();this.headElement=document.getElementsByTagName("head").item(0);this.linkId='cssId'+CSSImporter.scriptCounter++;return this;}
CSSImporter.scriptCounter=1;CSSImporter.prototype.buildScriptTag=function(){this.linkElement=document.createElement("link");this.linkElement.setAttribute("type","text/css");this.linkElement.setAttribute("rel","stylesheet");this.linkElement.setAttribute("charset","utf-8");this.linkElement.setAttribute("media","screen");this.linkElement.setAttribute("href",this.fullUrl+this.noCacheIE);this.linkElement.setAttribute("id",this.linkId);};CSSImporter.prototype.removeScriptTag=function(){this.headElement.removeChild(this.linkElement);};CSSImporter.prototype.addScriptTag=function(){this.headElement.appendChild(this.linkElement);};CSSImporter.prototype.importCSS=function(){this.buildScriptTag();this.addScriptTag();return this;};function jsonRequest(requestUrl,callback){var jsonScript=new JSONscriptRequest(requestUrl+'&callback='+callback);jsonScript.buildScriptTag();jsonScript.addScriptTag();}
var isIE=navigator.appName.indexOf("Microsoft")!=-1;var isIE5=navigator.userAgent.indexOf('MSIE 5.0')>0;var isIE55=navigator.userAgent.indexOf('MSIE 5.5')>0;var isIE70=navigator.userAgent.indexOf('MSIE 7.0')>0;var isFF3=navigator.userAgent.indexOf('Firefox/3')>0;var isChrome=navigator.userAgent.indexOf('Chrome')>0;function privateMoveUp(options,index){var newOption=new Option(options[index-1].text,options[index-1].value);if(options[index-1].disabled){options[index].disabled=true;options[index-1].disabled=false;}
options[index-1].text=options[index].text;options[index-1].value=options[index].value;options[index].text=newOption.text;options[index].value=newOption.value;}
function privateMoveDown(options,index){var newOption=new Option(options[index+1].text,options[index+1].value);if(options[index+1].disabled){options[index].disabled=true;options[index+1].disabled=false;}
options[index+1].text=options[index].text;options[index+1].value=options[index].value;options[index].text=newOption.text;options[index].value=newOption.value;}
function moveUp(sourceSelect){if(sourceSelect.length>1){var options=sourceSelect.options;var selectedIds=[];var index=0;for(var i=1;i<sourceSelect.length;i++){if(options[i].selected){selectedIds[index]=i;index++;}}
var selId;for(var j=0;j<selectedIds.length;j++){selId=selectedIds[j];privateMoveUp(options,selId);options[selId].selected=false;options[selId-1].selected=true;}
sourceSelect.focus();}}
function moveDown(sourceSelect){if(sourceSelect.length>1){var options=sourceSelect.options;var selectedIds=[];var index=0;for(var i=sourceSelect.length-2;i>=0;i--){if(sourceSelect.options[i].selected){selectedIds[index]=i;index++;}}
var selId;for(var j=0;j<selectedIds.length;j++){selId=selectedIds[j];privateMoveDown(options,selId);options[selId].selected=false;options[selId+1].selected=true;}
sourceSelect.focus();}}
function moveTop(sourceSelect){if(sourceSelect.length>1){var options=sourceSelect.options;var selectedIds=[];var index=0;for(var i=1;i<sourceSelect.length;i++){if(options[i].selected){selectedIds[index]=i;index++;}}
var selId;for(var k=0;k<selectedIds.length;k++){selId=selectedIds[k];for(var j=selId;j>k;j--){privateMoveUp(options,j);}
options[selId].selected=false;options[k].selected=true;}
sourceSelect.focus();}}
function moveBottom(sourceSelect){if(sourceSelect.length>1){var options=sourceSelect.options;var selectedIds=[];var index=0;for(var i=sourceSelect.length-2;i>=0;i--){if(sourceSelect.options[i].selected){selectedIds[index]=i;index++;}}
var selId;for(var k=0;k<selectedIds.length;k++){selId=selectedIds[k];for(var j=selId;j<sourceSelect.length-(k+1);j++){privateMoveDown(options,j);}
options[selId].selected=false;options[sourceSelect.length-(k+1)].selected=true;}
sourceSelect.focus();}}
function moveBottom2(sourceSelect){var selIndex=sourceSelect.selectedIndex;if(sourceSelect.length>1&&selIndex>-1&&selIndex<sourceSelect.length-1){var options=sourceSelect.options;for(var i=selIndex;i<sourceSelect.length-1;i++){privateMoveDown(options,i);}
sourceSelect.focus();sourceSelect.selectedIndex=sourceSelect.length-1;}}
function addOption(theSel,theText,theValue){var newOpt=new Option(theText,theValue);var selLength=theSel.length;theSel.options[selLength]=newOpt;}
function deleteOption(theSel,theIndex){var selLength=theSel.length;if(selLength>0){theSel.options[theIndex]=null;}}
function moveOptions(theSelFrom,theSelTo){var selLength=theSelFrom.length;var selectedText=[];var selectedValues=[];var selectedCount=0;var i;for(i=selLength-1;i>=0;i--)
{if(theSelFrom.options[i].selected)
{selectedText[selectedCount]=theSelFrom.options[i].text;selectedValues[selectedCount]=theSelFrom.options[i].value;deleteOption(theSelFrom,i);selectedCount++;}}
for(i=selectedCount-1;i>=0;i--)
{addOption(theSelTo,selectedText[i],selectedValues[i]);}}
var isDebug=false;function showDebug(){isDebug=true;jQuery("#debugDiv").show();}
function hideDebug(){isDebug=false;jQuery("#debugDiv").hide();}
function clearDebug(){document.getElementById('debugConsole').value='';}
function debug(msg){if(isDebug){document.getElementById("debugConsole").value=msg+"\n"+document.getElementById("debugConsole").value;}}
function hideWait(){jQuery('#globalWaiting').hide();}
function windowCentered(){var hide=arguments[3];if(hide===null){hide=true;}
var htmlID=arguments[0];var xOffset=0;var yOffset=0;if(arguments.length>1){xOffset=arguments[1];}
if(arguments.length>2){yOffset=arguments[2];}
var theTop=0;if(document.documentElement&&document.documentElement.scrollTop){theTop=document.documentElement.scrollTop;}else if(document.body){theTop=document.body.scrollTop;}
var obj=document.getElementById(htmlID);if(obj!==null){if(typeof(jQuery)!='undefined'&&htmlID!='documentDiv'&&htmlID!='imageUploadDiv'){jQuery('#'+htmlID).draggable({containment:'document',handle:'table.headerSection',cursor:'move'});}
obj.style.left=((jQuery(document.body).width()-jQuery(obj).width())/2)+xOffset;var zTop=theTop+(jQuery(window).height()-jQuery(obj).height())/2;if(zTop<0){zTop=0;}
if(zTop+yOffset<0){obj.style.top=0;}else{obj.style.top=zTop+yOffset;}}
if(hide){hideWait();}}
function showWait(){windowCentered('globalWaiting',0,0,false);jQuery('#globalWaiting').show();}
function showMask(){var oMask=document.getElementById('popupMask');var fullHeight=jQuery(document).height()+1000;var fullWidth=jQuery(document).width();var theBody=document.documentElement;var scTop=parseInt(theBody.scrollTop,10);var scLeft=parseInt(theBody.scrollLeft,10);oMask.style.height=fullHeight+"px";oMask.style.width=fullWidth+"px";oMask.style.top=scTop+"px";oMask.style.left=scLeft+"px";if(oMask!==null){oMask.style.display="block";}
showWait();}
function hideMask(){var oMask=document.getElementById('popupMask');if(oMask!==null){oMask.style.display="none";}
hideWait();killAllCalendars();}
function hideAllSelectsFromIE(){if(jQuery.browser.ie){jQuery("select").hide();jQuery("#myChart").hide();}}
function showAllSelectsFromIE(){if(isIE){jQuery("select").show();jQuery("#myChart").show();}}
function popupDiv(divID){windowCentered(divID);jQuery('#'+divID).show("fast");showMask();}
function destroyPopup(divID){hideMask();jQuery('#'+divID).remove();}
function collapseSidebar(b){if(b){document.forms[1].action.value='CollapseSidebar';document.forms[1].submit();}
else{document.forms[0].action.value='ExpandSidebar';document.forms[0].submit();}}
function showElement(elementID){var element=document.getElementById(elementID);if(element){element.style.display='block';}}
function hideElement(elementID){var element=document.getElementById(elementID);if(element){element.style.display='none';}}
function _popUp(url,popupWidth,popupHeight,windowName){var x,y;if(!document.all){x=window.screenX+400-(popupWidth/2);y=window.screenY+300-(popupHeight/2);}else{x=window.screenLeft+400-(popupWidth/2);y=window.screenTop+300-(popupHeight/2);y=y-65;}
y=y-16;window.open(url,windowName,'menubar=yes,toolbar=yes,location=no,directories=no,status=no,scrollbars=yes,resizable=yes,copyhistory=no,width='+popupWidth+',height='+popupHeight+',screenX='+x+',screenY='+y+',top='+y+',left='+x);}
function helpPopUp(url){_popUp(url,800,600);}
jQuery(function(){jQuery(".massUpdateButton").mouseover(function(){jQuery("table.gridview tbody tr:not(:hidden) td:first-child ").css({"background":"lightgray"});}).mouseout(function(){jQuery("table.gridview tbody tr:not(:hidden) td:first-child ").css({"background":"inherit"});});});function _popUpWithAddressBar(url,popupWidth,popupHeight){var x,y;if(!document.all){x=window.screenX+400-(popupWidth/2);y=window.screenY+300-(popupHeight/2);}else{x=window.screenLeft+400-(popupWidth/2);y=window.screenTop+300-(popupHeight/2);y=y-65;}
y=y-16;window.open(url,'Propertyware','menubar=yes,toolbar=yes,location=yes,directories=no,status=no,scrollbars=yes,resizable=yes,copyhistory=no,width='+popupWidth+',height='+popupHeight+',screenX='+x+',screenY='+y+',top='+y+',left='+x);}
function popUp(url){_popUpWithAddressBar(url,750,580);}
function help(p){_popUp('/pw/help.jsp?p='+p,800,600);}
var quickSearchTimeout;var quickSearchIndex=-1;var quickSearchOptionCount=0;function quickSearch(){var oSearchDiv=document.getElementById('searchDiv');oSearchDiv.style.top=jQuery("#searchText").position().top+20;oSearchDiv.style.left=jQuery("#searchText").position().left;if(quickSearchTimeout!==null){window.clearTimeout(quickSearchTimeout);}
quickSearchTimeout=window.setTimeout('doQuickSearch()',500);}
function doQuickSearch(){if(document.searchForm.searchText.value!==''){showElement('searchDiv');jQuery("#searchDiv").html("<img alt='Please Wait' height='12' align='absmiddle' src='../images/waiting6.gif' /> Loading").show();jQuery.get('/pw/search/search.do',{action:'QuickSearch',searchText:document.searchForm.searchText.value});}}
function quickSearchClearTimeout(){window.clearTimeout(quickSearchTimeout);}
function quickSearchHideTimeout(){quickSearchTimeout=window.setTimeout('quickSearchHide()',750);}
function quickSearchHide(){quickSearchIndex=-1;quickSearchOptionCount=0;jQuery("#searchDiv").hide();}
function refreshQuickSearchOptions(){var nodes=document.getElementById('quickSearchOptions').childNodes;var m=0;for(var k=0;k<nodes.length;k++){if(nodes[k].nodeName=="LI"){if(m==quickSearchIndex){nodes[k].style.backgroundColor='#ccc';nodes[k].style.color='#222';}
else{nodes[k].style.backgroundColor='#fff';nodes[k].style.color='#222';}
m++;}}}
function selectOption(e){debug(e);var nodes=document.getElementById('quickSearchOptions').childNodes;var m=0;for(var k=0;k<nodes.length;k++){if(nodes[k].nodeName=="LI"){if(m==quickSearchIndex){document.location.href='/pw/'+nodes[k].id;}
m++;}}}
function updateQuickSearchOptionStatuses(){var options=jQuery("#searchDiv li");options.each(function(i){this.index=i;});options.mouseover(function(e){debug(e);quickSearchIndex=this.index;});options.click(function(e){quickSearchIndex=this.index;selectOption(e);});options.mouseup(function(e){e.preventDefault();quickSearchIndex=this.index;});options.mousedown(function(e){e.preventDefault();quickSearchIndex=this.index;});quickSearchIndex=-1;quickSearchOptionCount=options.size();}
function getKeycode(e){var keycode;if(window.event){keycode=window.event.keyCode;}else if(e){keycode=e.which;}
return keycode;}
function goTo(url){document.location.href=url;}
var ap_instances=new Array();function ap_stopAll(playerID){for(var i=0;i<ap_instances.length;i++){try{if(ap_instances[i]!=playerID)document.getElementById("audioplayer"+ap_instances[i].toString()).SetVariable("closePlayer",1);else document.getElementById("audioplayer"+ap_instances[i].toString()).SetVariable("closePlayer",0);}catch(errorObject){}}}
function ap_registerPlayers(){var objectID;var objectTags=document.getElementsByTagName("object");for(var i=0;i<objectTags.length;i++){objectID=objectTags[i].id;if(objectID.indexOf("audioplayer")==0){ap_instances[i]=objectID.substring(11,objectID.length);}}}
var ap_clearID=setInterval(ap_registerPlayers,100);function applyCalendarBehaviour(){jQuery("input.date").focus(function(){setField(this,null,this.value,null);writeCalendar('cal1');}).blur(function(){if(document.getElementById('cal1').isMouseOver!='true'){hideElement('cal1');}
if(this.hasChanged&&this.onchange!=null){this.onchange();}});jQuery('input.timestamp').focus(function(){setField(this,null,this.value,null);writeCalendar('cal1');}).blur(function(){if(document.getElementById('cal1').isMouseOver!='true'){hideElement('cal1');}});jQuery('#cal1').mouseover(function(){this.isMouseOver='true';}).mouseout(function(){this.isMouseOver='false';});jQuery('.clickableDays').mouseover(function(){document.getElementById('cal1').isMouseOver='true';});}
function removePopup(jQueryPath){jQuery(jQueryPath).fadeOut('1000',function(){jQuery(jQueryPath).remove();hideMask();});}
jQuery(document).ready(function(){jQuery("#searchText").focus(function(e){debug(e);document.getElementById('searchText').value='';jQuery("#searchText").addClass("quickSearchInputActive");jQuery("#searchText").removeClass("quickSearchInputInactive");}).blur(function(e){debug(e);document.getElementById('searchText').value='Global Search';jQuery("#searchText").addClass("quickSearchInputInactive");jQuery("#searchText").removeClass("quickSearchInputActive");quickSearchHideTimeout();}).keydown(function(e){var keycode=getKeycode(e);if(keycode==8||(keycode>=46&&keycode<=90)||(keycode>=96&&keycode<=111)||(keycode>=186)){quickSearch(this);}else if(keycode==38||keycode==40){e.preventDefault();if(quickSearchOptionCount>0){if(keycode==38){if(quickSearchIndex===0){quickSearchIndex=quickSearchOptionCount-1;}else{quickSearchIndex--;}}else{if(quickSearchIndex==quickSearchOptionCount-1){quickSearchIndex=0;}else{quickSearchIndex++;}}
refreshQuickSearchOptions();}}
else if(keycode==13&&quickSearchIndex>=0){e.preventDefault();selectOption(e);}});applyCalendarBehaviour();});function switchAccount(selectAccount){document.location.href=document.location.href.split("?")[0]+"?action=SwitchAccount&userID="+selectAccount.value;}
function AjaxAction(actionFormName,actionURL){var formName=actionFormName;var url=actionURL;var debug=false;var usePost=false;var async=true;this.changeButtonsState=true;this.setAction=function(action){document.forms[formName].action.value=action;return this;};this.setUsePost=function(){this.usePost=true;return this;};this.setAsync=function(pAsync){this.async=pAsync;return this;};this.setChangeButtonsState=function(){this.changeButtonsState=false;return this;};this.send=function(){try{document.forms[formName].ajaxMode.value=true;var ajaxRequest=new AjaxRequest(url);if(this.debug)ajaxRequest.setEchoDebugInfo();ajaxRequest.addFormElementsById(formName+'.action');ajaxRequest.addFormElementsById(formName+'.ajaxMode');if(document.getElementById(formName+'.entityID')!=null){ajaxRequest.addFormElementsById(formName+'.entityID');}
for(i=0;i<arguments.length;i++){ajaxRequest.addFormElementsById(arguments[i]);}
ajaxRequest.setPreRequest(this.buttonsOff);ajaxRequest.setPostRequest(this.buttonsOn);ajaxRequest.setAsync(this.async);ajaxRequest.sendRequest();}catch(e){this.handleAjaxException(e);}};this.sendArray=function(arg){document.forms[formName].ajaxMode.value=true;var ajaxRequest=new AjaxRequest(url);ajaxRequest.setUsePOST();if(this.debug)ajaxRequest.setEchoDebugInfo();ajaxRequest.addFormElementsById(formName+'.action');ajaxRequest.addFormElementsById(formName+'.ajaxMode');for(i=0;i<arg.length;i++){var elemId=arg[i];try{ajaxRequest.addFormElementsById(elemId);}catch(ex){}}
ajaxRequest.setPreRequest(this.buttonsOff);ajaxRequest.setPostRequest(this.buttonsOn);ajaxRequest.setAsync(this.async);ajaxRequest.sendRequest();}
this.sendAll=function(){document.forms[formName].ajaxMode.value=true;var ajaxRequest=new AjaxRequest(url);if(this.debug)ajaxRequest.setEchoDebugInfo();if(this.usePost)ajaxRequest.setUsePOST();if(this.changeButtonsState){ajaxRequest.setPreRequest(this.buttonsOff);ajaxRequest.setPostRequest(this.buttonsOn);}
this.changeButtonsState=true;ajaxRequest.addFormElements(formName);ajaxRequest.setAsync(this.async);ajaxRequest.sendRequest();}
this.handleAjaxException=function(e){alert('Error:'+e);}
this.buttonsOn=function(){var theForm=document.forms[formName];for(i=0;i<theForm.elements.length;i++){if(theForm.elements[i].type=="button"){theForm.elements[i].disabled=false;theForm.elements[i].style.color='#333333';}}}
this.buttonsOff=function(){var theForm=document.forms[formName];for(i=0;i<theForm.elements.length;i++){if(theForm.elements[i].type=="button"){theForm.elements[i].disabled=true;theForm.elements[i].style.color='e7e7e7';}}}}
function ylib_Browser()
{d=document;this.agt=navigator.userAgent.toLowerCase();this.major=parseInt(navigator.appVersion);this.dom=(d.getElementById)?1:0;this.ns=(d.layers);this.ns4up=(this.ns&&this.major>=4);this.ns6=(this.dom&&navigator.appName=="Netscape");this.op=(window.opera?1:0);this.ie=(d.all);this.ie4=(d.all&&!this.dom)?1:0;this.ie4up=(this.ie&&this.major>=4);this.ie5=(d.all&&this.dom);this.win=((this.agt.indexOf("win")!=-1)||(this.agt.indexOf("16bit")!=-1));this.mac=(this.agt.indexOf("mac")!=-1);};var oBw=new ylib_Browser();function ylib_getPageY(o){var y=0;if(oBw.ns)y=o.pageY;else{while(eval(o)){y+=o.offsetTop;o=o.offsetParent;}}return y;};function ylib_getPageX(o){var x=0;if(oBw.ns)x=o.pageX;else{while(eval(o)){x+=o.offsetLeft;o=o.offsetParent;}}return x;};function ylib_getW(o){return(oBw.ns)?((o.width)?o.width:o.clip.width):((oBw.op&&typeof o.style.pixelWidth!='undefined')?w=o.style.pixelWidth:o.offsetWidth);};